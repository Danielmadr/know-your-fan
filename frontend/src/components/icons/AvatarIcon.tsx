import { useTheme } from "next-themes";
import { FC, SVGProps, useEffect, useState } from "react";

/**
 * Props for the AvatarIcon component
 *
 * Extends standard SVG element props with theme-aware color options.
 */
interface SvgIconProps extends SVGProps<SVGSVGElement> {
  /** Color to use when the application is in light theme mode (defaults to black) */
  lightColor?: string;
  /** Color to use when the application is in dark theme mode (defaults to white) */
  darkColor?: string;
}

/**
 * AvatarIcon Component
 *
 * A theme-aware SVG avatar icon that automatically adjusts its color based on
 * the current application theme (light or dark mode). This component safely handles
 * client-side rendering to prevent hydration mismatches with server-side rendering.
 */
const AvatarIcon: FC<SvgIconProps> = ({
  lightColor = "#000000",
  darkColor = "#ffffff",
  children,
  ...props
}) => {
  // State to track client-side mounting status to prevent SSR issues
  const [mounted, setMounted] = useState(false);
  const { theme, resolvedTheme } = useTheme();

  // Effect to ensure theme-based rendering only happens client-side
  useEffect(() => {
    setMounted(true);
  }, []);

  // Select the appropriate color based on current theme
  const currentColor =
    mounted && (theme === "dark" || resolvedTheme === "dark")
      ? darkColor
      : lightColor;

  return (
    <svg xmlns="http://www.w3.org/2000/svg" {...props}>
      <defs id="defs1" />
      <g id="g1">
        <path
          style={{ fill: currentColor }}
          d="m 234.08819,689.71052 c -7.31684,-4.0238 -7.27169,-3.7147 -7.30369,-49.9895 l -0.0297,-42.8704 -34.99999,-0.5803 c -38.56647,-0.6395 -43.20984,-1.4717 -59.66667,-10.6934 -11.56068,-6.4781 -26.81751,-22.7353 -32.58027,-34.7166 -9.144328,-19.0119 -8.706758,-8.0423 -8.706758,-218.26889 0,-161.712 0.29075,-191.3895 1.95284,-199.3333 6.234828,-29.7986 29.869248,-55.273408 60.398658,-65.101708 l 8.93554,-2.8766 218.66664,-0.3822 c 195.64819,-0.3419 219.77703,-0.1588 229.21474,1.74 27.37029,5.5064 50.80952,23.5596 62.26048,47.953908 7.89066,16.8096 7.48573,5.8793 8.02679,216.6666 0.55107,214.68349 1.12309,199.77829 -8.43764,219.86169 -8.83624,18.5616 -27.50265,34.4765 -49.06438,41.8321 -8.65622,2.9531 -8.80864,2.9571 -126.50842,3.3463 l -117.84175,0.3896 -32.82491,23.7221 c -62.41089,45.1034 -94.16965,67.78 -97.07058,69.3111 -3.64786,1.9253 -10.91055,1.92 -14.42098,-0.01 z m 70.66666,-78.4831 c 12.46666,-9.0586 32.26666,-23.4075 44,-31.8864 l 21.33333,-15.4162 118.66666,-0.1607 c 107.08845,-0.1449 119.24781,-0.3768 124.62297,-2.3763 14.57541,-5.4221 24.38298,-14.193 30.53013,-27.303 l 3.51356,-7.4934 0.39452,-191.33329 c 0.44001,-213.3909 0.984,-200.1284 -8.80344,-214.6291 -5.84405,-8.6583 -14.97181,-15.872 -24.60575,-19.4461 -6.81471,-2.528108 -12.42478,-2.591408 -229.6801,-2.591408 H 162.03197 l -8.92912,4.395808 c -11.37586,5.6004 -20.35302,14.5874 -25.57224,25.6003 l -4.10908,8.6705 -0.4097,189.3333 c -0.30293,139.99179 -0.006,191.24449 1.13799,196.66669 1.93667,9.1764 7.01175,18.7236 13.51556,25.4253 5.08186,5.2365 17.13835,12.0631 24.41227,13.8225 2.1942,0.5308 22.14641,1.1779 44.33825,1.438 55.56672,0.6513 52.33895,-2.3055 52.33895,47.9458 v 32.7173 l 11.66667,-8.4547 c 6.41666,-4.6502 21.86666,-15.8664 34.33333,-24.9249 z m 40.66666,-78.721 c -13.37839,-1.4729 -31.63005,-6.8965 -44.66666,-13.273 -22.81438,-11.1591 -38.26888,-26.361 -48.09467,-47.3086 -6.58971,-14.0487 -9.59038,-25.36609 -11.84273,-44.66669 l -1.63378,-14 -1.07288,7.9722 c -1.63825,12.1732 0.12714,42.54269 3.08252,53.02779 1.39524,4.95 2.10439,9 1.57591,9 -1.43412,0 -13.35336,-12.9518 -19.74636,-21.457 -23.14035,-30.78569 -35.24148,-65.44379 -35.33807,-101.20969 -0.0754,-27.8998 5.63481,-46.1859 18.84891,-60.361 5.35233,-5.7416 5.75563,-6.536 2.88782,-5.6886 -4.75267,1.4043 -17.46025,8.523 -20.99474,11.761 -1.64711,1.509 -3.24,2.4912 -3.53976,2.1828 -1.03663,-1.0667 5.63324,-24.9114 9.62731,-34.4176 13.22606,-31.4789 48.54722,-67.6146 79.45387,-81.2861 8.02792,-3.5511 8.54881,-3.5452 12.47584,0.1429 2.86394,2.6896 4.43762,2.98 15.21239,2.8069 6.73075,-0.1082 12.66627,-0.8414 13.49154,-1.6667 1.07584,-1.0758 0.55825,-1.4736 -1.91772,-1.4736 -5.7494,0 -18.36257,-5.0233 -25.18144,-10.0289 -7.93187,-5.8225 -16.57668,-18.4266 -19.47399,-28.393 -3.65196,-12.5623 -1.50594,-13.4113 21.51336,-8.5113 29.25342,6.2271 54.01987,7.1153 81.33333,2.9169 34.42575,-5.2916 55.11037,-4.9257 86.66666,1.5332 28.4256,5.8181 40.88867,11.712 48.95019,23.1489 2.84341,4.034 5.4417,6.1577 8.26514,6.7553 10.6644,2.2574 30.54944,9.4259 40.9105,14.7482 18.81985,9.6674 27.9032,19.4869 27.85375,30.111 -0.033,7.098 -1.70671,8.3122 -5.11082,3.7079 -3.91335,-5.2931 -12.12612,-10.6307 -18.45115,-11.9916 -4.10057,-0.8824 -4.60433,-0.7944 -2.60369,0.4547 8.87793,5.5429 13.13727,9.6616 17.68941,17.1055 4.95135,8.0966 5.16069,8.9085 5.09902,19.7766 -0.0754,13.285 -1.77927,18.5794 -10.81557,33.6069 -7.47654,12.4336 -17.16595,23.8459 -15.67675,18.4644 1.57441,-5.6896 0.86548,-17.4014 -1.24863,-20.6279 -4.75515,-7.2573 -11.24141,-4.8625 -19.02667,7.0247 -8.10505,12.3755 -8.31096,12.4394 -8.25397,2.5614 0.12918,-22.392 -12.66074,-30.47 -38.57076,-24.361 -4.57783,1.0794 -12.27388,3.7538 -17.10234,5.9431 -23.60638,10.7037 -40.90527,43.5053 -33.36134,63.2588 1.24338,3.2557 3.12911,6.6402 4.19052,7.5211 2.46312,2.0443 2.42806,1.3502 -0.19769,-3.9132 -2.52622,-5.0639 -2.67861,-15.0443 -0.35195,-23.0496 l 1.6747,-5.7621 0.83628,8.6667 c 0.45995,4.7667 1.81037,10.5276 3.00094,12.8021 5.89079,11.2539 22.42735,18.5536 40.01822,17.6653 11.5015,-0.5808 16.05934,-3.2711 22.99874,-13.5756 l 4.61725,-6.8562 v 7.3522 c 0,18.222 12.88741,17.5337 26.00066,-1.3887 2.05085,-2.9594 3.9921,-5.1174 4.31389,-4.7957 0.3218,0.3218 -0.10704,3.919 -0.95296,7.9938 -1.28487,6.1892 -1.14905,9.2803 0.82509,18.7785 2.01427,9.6914 2.11605,12.3039 0.68949,17.6971 -3.51594,13.292 -15.86399,22.5611 -31.83954,23.9005 -12.13881,1.0177 -21.12798,-1.6606 -39.03662,-11.6307 -33.91185,-18.8793 -45.69633,-21.5015 -74,-16.4657 -24.15832,4.2983 -44.4148,-0.1918 -66.85532,-14.8193 -23.91671,-15.5897 -34.75602,-31.0746 -38.29569,-54.7088 -1.77298,-11.8381 -1.79857,-11.8927 -2.76227,-5.8937 -1.23424,7.6831 1.02249,24.1307 4.63611,33.7889 3.56541,9.5295 12.03547,22.2187 18.5568,27.8006 17.06742,14.6086 40.12067,22.379 64.91503,21.8804 l 9.528,-0.1917 -8.10557,7.3329 c -16.34404,14.7861 -23.85515,31.5279 -23.92787,53.3338 -0.0712,21.36129 6.95164,38.60879 21.51782,52.84549 8.48735,8.2954 17.06178,13.1177 31.68734,17.821 l 11.04214,3.5509 -8.45532,1.558 c -10.6819,1.9682 -23.97174,1.9918 -33.08224,0.059 -7.30156,-1.5493 -18.90781,-6.7548 -20.38329,-9.1422 -0.46184,-0.7472 -1.52607,-1.3586 -2.36495,-1.3586 -4.08428,0 10.14127,11.4077 20.34928,16.3184 10.02477,4.8225 10.94846,5.5566 8,6.3576 -5.99172,1.6279 -29.77619,2.3645 -40,1.2389 z m 99.9301,-259.98559 c 2.23844,-4.1998 4.05411,-9.052 4.03482,-10.7827 -0.0248,-2.2252 -1.50437,-0.3794 -5.05232,6.303 -2.75949,5.1972 -7.2437,12.5486 -9.96492,16.3364 -2.72123,3.7877 -4.92079,7.3354 -4.88793,7.8837 0.13366,2.2301 12.08068,-12.6303 15.87035,-19.7404 z m 24.0699,-74.6604 c 11.8125,-2.6235 17.81879,-6.6023 9.96671,-6.6023 -1.85164,0 -7.43747,-2.05 -12.41297,-4.5557 -4.97549,-2.5056 -12.50447,-5.5609 -16.73107,-6.7896 -7.66909,-2.2295 -29.13712,-6.0793 -29.8829,-5.3589 -0.21646,0.2091 2.18354,1.9009 5.33333,3.7595 3.14979,1.8586 9.6269,6.7921 14.39356,10.9633 4.76667,4.1712 9.86667,8.0854 11.33334,8.6982 3.65229,1.526 10.81877,1.4804 18,-0.1145 z"
          id="path1"
        />
      </g>
      {children}
    </svg>
  );
};

export default AvatarIcon;
